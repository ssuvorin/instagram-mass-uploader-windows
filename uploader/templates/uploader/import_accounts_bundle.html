{% extends "uploader/base.html" %}

{% block title %}Import Account Bundle - Instagram Uploader{% endblock %}

{% block extra_css %}
<style>
	.bundle-example { white-space: pre-wrap; overflow-wrap: anywhere; word-break: break-word; }
</style>
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<div>
		<a href="{% url 'account_list' %}" class="text-decoration-none">
			<i class="bi bi-arrow-left"></i> Back to Accounts
		</a>
		<h2 class="mb-0 mt-2">Import Account Bundle</h2>
        <p class="text-muted mb-0">–§–æ—Ä–º–∞—Ç—ã (1 —Å—Ç—Ä–æ–∫–∞ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç, —Å–µ–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ <code>|</code>):</p>
        <ul class="text-muted small mb-0">
            <li><b>–ù–æ–≤—ã–π</b>: <code>username:pass:email:email_pass | user_agent | proxy | ip | locale</code></li>
            <li><b>–ü—Ä–æ–∫—Å–∏</b>: <code>user:pass@host:port</code> –∏–ª–∏ <code>http:host:port:user:pass</code> –∏–ª–∏ <code>host:port:user:pass</code></li>
            <li><b>Locale</b>: <code>es-CL</code> –∏–ª–∏ <code>es_CL</code> (–Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è)</li>
            <li><b>Legacy</b> (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è): <code>creds | UA | device_ids | cookies/headers | proxy</code></li>
        </ul>
	</div>
</div>

<div class="row">
	<div class="col-lg-10 mx-auto">
		<div class="card">
			<div class="card-header">
				<h5 class="mb-0"><i class="bi bi-file-earmark-arrow-up"></i> Upload Bundle File</h5>
			</div>
			<div class="card-body">
				<div class="alert alert-info">
					<div class="d-flex">
						<div class="me-3">
							<i class="bi bi-info-circle-fill fs-3"></i>
						</div>
						<div>
							<h6 class="alert-heading">Expected Format</h6>
                            <p class="mb-2">–ü—Ä–∏–º–µ—Ä—ã:</p>
                            <pre class="small bg-light p-2 rounded overflow-auto bundle-example">login:pass:email:emailpass | Instagram 400.0.0.27.75 (iPhone...) | proxyuser:proxypass@93.190.141.105:9999 | 186.40.219.32 | es-CL
login:pass | Instagram 269.0.0.18.75 Android (29/10; 640dpi; 1440x3040; samsung; SM-G973F; beyond1; exynos9820) | http:190.2.142.241:9999:proxy:pass | 186.189.71.110 | es_CL
login:pass:email:emailpass|Instagram 364.0.0.18.86 Android (...)|android-xxx;device_guid;phone_id;ad_id|Authorization=Bearer IGT:2:...; IG-U-DS-USER-ID=...; X-MID=...; ...|https:host:10000:proxyuser:proxypass</pre>

                            <ul class="mb-0">
                                <li><b>Creds</b>: <code>login:password[:email][:email_password]</code></li>
                                <li><b>User-Agent</b>: Instagram –º–æ–±–∏–ª—å–Ω—ã–π UA (—Å—Ç—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è instagrapi)</li>
                                <li><b>Proxy</b>: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã</li>
                                <li><b>IP</b>: –≤–Ω–µ—à–Ω–∏–π IP –ø—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</li>
                                <li><b>Locale</b>: –Ω–∞–ø—Ä–∏–º–µ—Ä, <code>es-CL</code>; –≤–ª–∏—è–µ—Ç –Ω–∞ –≥–µ–æ –≤ instagrapi</li>
                                <li><b>Legacy</b>: –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å cookies/headers –∏ device ids ‚Äî –±—É–¥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã</li>
                            </ul>
						</div>
					</div>
				</div>

				<form method="post" enctype="multipart/form-data" class="mt-3">
					{% csrf_token %}
					<div class="mb-4">
						<label for="client_id" class="form-label">Assign to Client (optional)</label>
						<select class="form-select" id="client_id" name="client_id">
							<option value="">‚Äî Without client ‚Äî</option>
							{% for c in clients %}
								<option value="{{ c.id }}">{{ c.name }} {% if c.agency %}(Agency: {{ c.agency.name }}){% endif %}</option>
							{% endfor %}
						</select>
						<div class="form-text">–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –±—É–¥—É—Ç –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É.</div>
					</div>

					<div class="mb-4">
						<label for="tags" class="form-label">Assign Tag (optional)</label>
						<select class="form-select" id="tags" name="tags">
							<option value="">‚Äî Without tag ‚Äî</option>
							{% for tag in tags %}
								<option value="{{ tag.id }}">{{ tag.name }}</option>
							{% endfor %}
						</select>
						<div class="form-text">–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –±—É–¥—É—Ç –ø–æ–º–µ—á–µ–Ω—ã –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ç–µ–≥–æ–º.</div>
					</div>
					<div class="mb-4">
						<label for="accounts_file" class="form-label">Bundle File</label>
						<input type="file" name="accounts_file" id="accounts_file" class="form-control" accept=".txt" required>
						<div class="form-text">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç</div>
					</div>

					<div class="mb-4">
						<label for="proxy_source" class="form-label">Proxy Source</label>
						<select class="form-select" id="proxy_source" name="proxy_source">
							<option value="bundle" selected>üì¶ Use proxies from bundle</option>
							<option value="locale">üåç Assign by locale (ignore bundle proxies)</option>
						</select>
						<div class="form-text">–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–∫—Å–∏: –∏–∑ bundle –∏–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –ª–æ–∫–∞–ª–∏.</div>
					</div>

					<div class="mb-4">
						<label for="profile_locale" class="form-label">Default Locale</label>
						<select class="form-select" id="profile_locale" name="profile_locale">
							<option value="ru_BY" selected>üáßüáæ ru_BY (Belarus)</option>
							<option value="en_IN">üáÆüá≥ en_IN (India)</option>
							<option value="en_US">üá∫üá∏ en_US (United States)</option>
							<option value="es_CL">üá®üá± es_CL (Chile)</option>
							<option value="es_MX">üá≤üáΩ es_MX (Mexico)</option>
							<option value="pt_BR">üáßüá∑ pt_BR (Brazil)</option>
							<option value="el_GR">üá¨üá∑ el_GR (Greece)</option>
							<option value="de_DE">üá©üá™ de_DE (Germany)</option>
						</select>
						<div class="form-text">–õ–æ–∫–∞–ª—å –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "Assign by locale".</div>
					</div>

					<div class="mb-4">
						<label for="profile_mode" class="form-label">Profile Mode</label>
						<select class="form-select" id="profile_mode" name="profile_mode">
							<option value="create_profiles" selected>–°–æ–∑–¥–∞–≤–∞—Ç—å Dolphin –≤–µ–±‚Äë–ø—Ä–æ—Ñ–∏–ª–∏</option>
							<option value="api_only">–¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ API (–±–µ–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π)</option>
						</select>
						<div class="form-text">–†–µ–∂–∏–º API‚Äëonly –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ –∏–º–ø–æ—Ä—Ç cookies –≤ –Ω–∏—Ö.</div>
					</div>

					<div class="d-grid gap-2">
						<button type="submit" class="btn btn-primary" id="submitBtn">
							<i class="bi bi-cloud-upload"></i> Import
						</button>
						<a href="{% url 'account_list' %}" class="btn btn-outline-secondary">
							<i class="bi bi-x"></i> Cancel
						</a>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
{% endblock %}


